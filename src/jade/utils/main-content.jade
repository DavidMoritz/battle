mixin welcome()
	.welcome(ng-if='state == "welcome"')
		div(ng-hide='currentUser')
			button.btn.btn-danger.btn-lg.facebook-login(ng-click='googleLogin()') Login with Google
			br
			button.btn.btn-primary.btn-lg.facebook-login(ng-click='fbLogin()') Login with Facebook

mixin joinGame()
	.pre-game.row(ng-if='state == "joinGame"')
		+col(6)
			h3 Choose a game:
			.btn.btn-info(ng-show='currentUser' ng-repeat='game in joinableGames track by $index' ng-click='joinActiveGame(game)') {{game.name}}
			h3 Or create a new one:
			.btn.btn-success(ng-click='createNewGame()') Create new game
		+col(6)
			h3 Message List:
			ul.well
				li(ng-repeat='message in chatList track by $index') {{message.user}}: {{message.text}}
			form(name='chatWindow' ng-submit='submitChat()')
				input.form-control(ng-model='ff.chat' placeholder='respond to chat')
				button(ng-hide='true' type='submit')

mixin startGame()
	.pre-game.row(ng-if='state == "startGame"')
		+col(6)
			h3 Players:
			ul
				li(ng-repeat='player in activeGame.playerNames track by $index') {{player}}
			button.btn.btn-success(ng-click='addEvent("startGame")') Start the game

mixin chooseBattle()
	.row(ng-if='state == "chooseBattle"')
		+col(6)
			h3 Cards:
			ul.cards
				li.held-card(ng-repeat='card in user.deck.heldCards' ng-click='selectCard(card)')
					.card-img.small(class='{{card.color}} {{card.selected ? "selected" : ""}}')
						.card-value {{card.value}}
			.btn.btn-success(ng-disabled='!user.deck.submittable' ng-click='submitCards()') Submit
			h3 Battle Value: {{user.deck.battleValue}}
		+col(6)
			h3 Other Players:
			ul.players
				li(ng-repeat='player in allPlayers' ng-hide='player.uid == currentUser.uid') {{player.name}}
					button.btn.btn-danger(ng-hide='battleHistory[getEventCount("submitBattle")][player.uid]') Not Ready
					button.btn.btn-success(ng-show='battleHistory[getEventCount("submitBattle")][player.uid]') Ready

mixin waiting()
	.row(ng-if='state == "waiting"')
		+col(6)
			h3 Waiting for other players
		+col(6)
			h3 Other Players:
			ul.players
				li(ng-repeat='player in allPlayers' ng-hide='player.uid == currentUser.uid') {{player.name}}
					button.btn.btn-danger(ng-hide='battleHistory[getEventCount("submitBattle")][player.uid]') Not Ready
					button.btn.btn-success(ng-show='battleHistory[getEventCount("submitBattle")][player.uid]') Ready

mixin determineWinner()
	.row(ng-if='state == "determineWinner"')
		+col(6)
			h3 Players
			ul.players
				li(ng-repeat='player in allPlayers') {{player.name}}: {{player.battlePower}}
					span.winner(ng-show='player.winner') WINNER
					ul.cards
						li.held-card(ng-repeat='card in battleHistory[getEventCount("submitBattle") - 1][player.uid]')
							.card-img.small(class='{{card.color}}')
								.card-value {{card.value}}
					hr
			button.btn.btn-success(ng-if='user.deck.heldCards.length' ng-click='changeState("chooseBattle")') Next Battle
			button.btn.btn-success(ng-if='!user.deck.heldCards.length' ng-click='changeState("upgrade")') Choose Upgrades

mixin upgrade()
	.row(ng-if='state == "upgrade"')
		+col(6)
			h3 Choose your upgrade
			ul.upgrades.cards
				li.held-card(ng-repeat='card in user.deck.upgradeCards' ng-click='selectCard(card)')
					.card-img.small(class='{{user.color}} {{card.class}} {{card.selected ? "selected" : ""}}' title='{{card.name}}')
						.card-value {{card.id}}
			.btn.btn-success(ng-disabled='!user.deck.upgradable' ng-click='upgradeCards()') Upgrade